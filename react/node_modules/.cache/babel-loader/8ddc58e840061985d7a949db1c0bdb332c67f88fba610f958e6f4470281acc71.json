{"ast":null,"code":"import React from\"react\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AddProduct=()=>{const[name,setName]=React.useState(\"\");const[description,setDescription]=React.useState(\"\");const[price,setPrice]=React.useState(0);const[image,setImage]=React.useState(null);async function submitForm(){// first upload image\nif(!name||!description||!price){alert(\"Please fill all fields\");return;}if(image){const formData=new FormData();formData.append(\"file\",image);formData.append(\"name\",name);formData.append(\"description\",description);formData.append(\"price\",price.toString());console.log(\"Form data to be sent:\",formData);await fetch(\"https://idggvb8375.execute-api.eu-west-1.amazonaws.com/v1/upload\",{method:\"POST\",body:formData}).then(async response=>{if(response.ok){console.log(await response.json());alert(\"Image uploaded successfully\");}else{alert(\"Error uploading image\");}}).catch(error=>{console.error(\"Error:\",error);alert(\"Error uploading image\");});}}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Add Product\"}),/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Product Image:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:e=>{var _e$target$files;const file=(_e$target$files=e.target.files)===null||_e$target$files===void 0?void 0:_e$target$files[0];if(file){setImage(file);const reader=new FileReader();reader.onload=function(ev){var _ev$target;const img=document.getElementById(\"preview-img\");if(img&&(_ev$target=ev.target)!==null&&_ev$target!==void 0&&_ev$target.result){img.src=ev.target.result;img.style.display=\"block\";}};reader.readAsDataURL(file);}else{setImage(null);const img=document.getElementById(\"preview-img\");if(img){img.src=\"\";img.style.display=\"none\";}}}}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{id:\"preview-img\",alt:\"Preview\",style:{maxWidth:\"200px\",marginTop:\"10px\",display:\"none\"}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Product Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"productName\",required:true,value:name,onChange:e=>setName(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",required:true,rows:5,cols:40,value:description,onChange:e=>setDescription(e.target.value)})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",min:\"0\",step:\"0.01\",required:true,value:price,onChange:e=>setPrice(Number(e.target.value))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:e=>{e.preventDefault();submitForm();},children:\"Add Product\"})]})]});};export default AddProduct;","map":{"version":3,"names":["React","jsx","_jsx","jsxs","_jsxs","AddProduct","name","setName","useState","description","setDescription","price","setPrice","image","setImage","submitForm","alert","formData","FormData","append","toString","console","log","fetch","method","body","then","response","ok","json","catch","error","children","className","type","accept","onChange","e","_e$target$files","file","target","files","reader","FileReader","onload","ev","_ev$target","img","document","getElementById","result","src","style","display","readAsDataURL","id","alt","maxWidth","marginTop","required","value","rows","cols","min","step","Number","onClick","preventDefault"],"sources":["/Users/jakobmerten/uni/it_infrastruktur/it_infrastruktur_frontend/src/AddProduct.tsx"],"sourcesContent":["import React from \"react\";\nimport \"./App.css\";\n\nconst AddProduct: React.FC = () => {\n  const [name, setName] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n  const [price, setPrice] = React.useState(0);\n  const [image, setImage] = React.useState<File | null>(null);\n\n  async function submitForm() {\n    // first upload image\n\n    if (!name || !description || !price) {\n      alert(\"Please fill all fields\");\n      return;\n    }\n\n    if (image) {\n      const formData = new FormData();\n      formData.append(\"file\", image);\n      formData.append(\"name\", name);\n      formData.append(\"description\", description);\n      formData.append(\"price\", price.toString());\n\n      console.log(\"Form data to be sent:\", formData);\n\n      await fetch(\n        \"https://idggvb8375.execute-api.eu-west-1.amazonaws.com/v1/upload\",\n        {\n          method: \"POST\",\n          body: formData,\n        }\n      )\n        .then(async (response) => {\n          if (response.ok) {\n            console.log(await response.json());\n            alert(\"Image uploaded successfully\");\n          } else {\n            alert(\"Error uploading image\");\n          }\n        })\n        .catch((error) => {\n          console.error(\"Error:\", error);\n          alert(\"Error uploading image\");\n        });\n    }\n\n  }\n\n  return (\n    <div>\n      <h1>Add Product</h1>\n      <form>\n        <div className=\"form-group\">\n          <label>Product Image:</label>\n          <input\n            type=\"file\"\n            accept=\"image/*\"\n            onChange={(e) => {\n              const file = e.target.files?.[0];\n              if (file) {\n                setImage(file);\n                const reader = new FileReader();\n                reader.onload = function (ev) {\n                  const img = document.getElementById(\n                    \"preview-img\"\n                  ) as HTMLImageElement;\n                  if (img && ev.target?.result) {\n                    img.src = ev.target.result as string;\n                    img.style.display = \"block\";\n                  }\n                };\n                reader.readAsDataURL(file);\n              } else {\n                setImage(null);\n                const img = document.getElementById(\n                  \"preview-img\"\n                ) as HTMLImageElement;\n                if (img) {\n                  img.src = \"\";\n                  img.style.display = \"none\";\n                }\n              }\n            }}\n          />\n          <div>\n            <img\n              id=\"preview-img\"\n              alt=\"Preview\"\n              style={{ maxWidth: \"200px\", marginTop: \"10px\", display: \"none\" }}\n            />\n          </div>\n        </div>\n        <div className=\"form-group\">\n          <label>Product Name:</label>\n          <input\n            type=\"text\"\n            name=\"productName\"\n            required\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label>Description:</label>\n          <textarea\n            name=\"description\"\n            required\n            rows={5}\n            cols={40}\n            value={description}\n            onChange={(e) => setDescription(e.target.value)}\n          />\n        </div>\n        <div className=\"form-group\">\n          <label>Price:</label>\n          <input\n            type=\"number\"\n            name=\"price\"\n            min=\"0\"\n            step=\"0.01\"\n            required\n            value={price}\n            onChange={(e) => setPrice(Number(e.target.value))}\n          />\n        </div>\n        <button\n          onClick={(e) => {\n            e.preventDefault();\n            submitForm();\n          }}\n        >\n          Add Product\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default AddProduct;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}